# ℹ️Создание .dll библиотеки и подключение её к Python
Данный проект реализует умножение двумерных матриц. В начале создается .dll библиотека для непосредственного перемножения матриц, далее запускается скрипт на python который считывает две входные матрицы из .txt файлов, передает их .dll библиотеке для перемножения, принимает результат и записывает его в .txt файл.

# 📚.dll библиотеки
Библиотека резализует две функции к которым может обрщаться Python. Первая функция - функция для перемножения матриц. Она принимает две матрицы по константным указателям, а вовращает указатель на двумерную матрицу. Вторая функция очищает память выделенную первой функцией для возвращаемой матрицы.
```c
DLL_EXPORT int32_t** matrix_mult(const int32_t** matrix_1,
                                 const int32_t** matrix_2,
                                 int32_t matrix_1_n_rows,
                                 int32_t matrix_1_n_cols,
                                 int32_t matrix_2_n_rows,
                                 int32_t matrix_2_n_cols);

DLL_EXPORT void free_memory(int32_t** matrix, int32_t n_rows);
```

# 🖥️Python код использующий .dll библиотеку
На Python реализованы два класса - PyMatrix и CLib, а также файл с main() функцией - matrix_mul.py. 

PyMatrix реализует все необходимые операции для работы с матрицами:
1. Считывание матриц из .txt файлов
2. Преобразование Python листов в С матрицы.
3. Запись матрицы в файл
4. Сравнение матриц
5. Проверка на пустоту
6. Проверка размерности (чтобы количество столбцов в каждой строчке было одинаковым)

Класс CLib:
1. Подключается к .dll библиотеке
2. Перемножает матрицы PyMatrix используя .dll библиотеку

# 📝Тестирование
Тестирование реализовано с помощью pytest и tox. Все тесты прописаны в файле test_matrix_mult.py. Использованы фикстуры, параметризация и монкейпатчи. Tox создает виртуальные среды для разных версий Python, и может устанавливать для каждой среды разные версии зависимостей (например разные версии библиотеки pytest). В данном проекте тестирование запускается для двух версий python - 3.10 и 3.12. Тестирование можно запустить из основной директории проекта при помощи команды:
```shell
tox
```

# 🏃 Как запустит?
Для запуска нужно прописать две команды в командной строке директории проекта. Одну для компиляции .dll библиотеки, другую для запуска python скрипта для перемножения матриц. Матрицы можно менять внутри файлов matrix1.txt и matrix2.txt.
### Команда для компиляции dll библиотеки на Ubuntu

```shell
clang -shared -o c_src/lib.dll c_src/mylib.c -std=c11
```
### Команда для компиляции dll библиотеки на Windows

```cmd
 & $gccPath -shared -o c_src/lib.dll c_src/mylib.c -std=c11
```
### Команда для компиляции dll библиотеки на MacOS

```shell
/usr/bin/clang -shared -o s_src/lib.dll c_src/mylib.cpp -std=c11 -fdeclspec
```
### Команда для запуска пайтон скрипта для перемножения матриц
```shell
python matrix_mul.py matrix1.txt matrix2.txt result.txt
```